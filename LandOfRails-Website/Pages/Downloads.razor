@page "/downloads"
@using Microsoft.EntityFrameworkCore
@using LandOfRails_Website.Models

@inject IDbContextFactory<landofrails_websiteContext> DbFactory

@{
    var context = DbFactory.CreateDbContext();
}

@if (context.Downloads.Any())
{
    @foreach (var download in context.Downloads)
    {
        <!-- Start: Map Download Block -->
        <section class="py-4 py-xl-5">
            <div class="container">
                <div class="d-flex flex-column justify-content-center align-items-center p-4 py-5" style="background: linear-gradient(rgba(0,123,255,0.2) 0%, rgba(0,123,255,0.2) 100%), url('@(download.BackgroundImageLink ?? "assets/img/2018-05-22_18.55.02-1.png?h=b9a320447937bf44af0aa7714c84a4ca")') center / cover;height: 281px;border-top-right-radius: 50px;border-bottom-left-radius: 50px;">
                    <div class="row">
                        <div class="col-md-10 col-xl-8 text-center d-flex d-sm-flex d-md-flex justify-content-center align-items-center mx-auto justify-content-md-start align-items-md-center justify-content-xl-center">
                            <div style="padding-bottom: 12px;padding-top: 12px;background: rgba(0,0,0,0.57);border-bottom-left-radius: 50px;border-top-right-radius: 50px;">
                                <h1 class="text-uppercase fw-bold mb-3" style="color: rgb(255,255,255);">Traincraft 2017</h1>
                                <p class="mb-4" style="color: rgb(255,255,255);">@(download.Description ?? "")</p>
                                <a class="btn btn-primary fs-5 me-2 py-2 px-4" role="button" href="@download.DownloadLink" style="background: #d0132d;border-style: none;">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="1em" height="1em" fill="currentColor" style="margin-right: 10px;margin-top: -5px;">
                                        <!--! Font Awesome Free 6.1.1 by @@fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. -->
                                        <path d="M480 352h-133.5l-45.25 45.25C289.2 409.3 273.1 416 256 416s-33.16-6.656-45.25-18.75L165.5 352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h448c17.67 0 32-14.33 32-32v-96C512 366.3 497.7 352 480 352zM432 456c-13.2 0-24-10.8-24-24c0-13.2 10.8-24 24-24s24 10.8 24 24C456 445.2 445.2 456 432 456zM233.4 374.6C239.6 380.9 247.8 384 256 384s16.38-3.125 22.62-9.375l128-128c12.49-12.5 12.49-32.75 0-45.25c-12.5-12.5-32.76-12.5-45.25 0L288 274.8V32c0-17.67-14.33-32-32-32C238.3 0 224 14.33 224 32v242.8L150.6 201.4c-12.49-12.5-32.75-12.5-45.25 0c-12.49 12.5-12.49 32.75 0 45.25L233.4 374.6z"></path>
                                    </svg>Download
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- End: Map Download Block -->
        <hr style="margin-top: -12px;margin-bottom: -12px;">
    }
}
else
{
    <!-- Start: No downloads -->
    <section class="py-4 py-xl-5">
        <div class="container">
            <div class="d-flex flex-column justify-content-center align-items-center p-4 py-5" style="background: linear-gradient(rgba(0,123,255,0.2) 0%, rgba(0,123,255,0.2) 100%), url(&quot;assets/img/2018-05-22_18.55.02-1.png?h=b9a320447937bf44af0aa7714c84a4ca&quot;) center / cover;height: 281px;border-top-right-radius: 50px;border-bottom-left-radius: 50px;">
                <div class="row">
                    <div class="col-md-10 col-xl-8 text-center d-flex d-sm-flex d-md-flex justify-content-center align-items-center mx-auto justify-content-md-start align-items-md-center justify-content-xl-center">
                        <div style="padding-bottom: 12px;padding-top: 12px;background: rgba(0,0,0,0.57);border-bottom-left-radius: 50px;border-top-right-radius: 50px;">
                            <h1 class="text-uppercase fw-bold" style="color: rgb(255,255,255);">There are currently no downloads available</h1>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- End: No downloads -->
}
